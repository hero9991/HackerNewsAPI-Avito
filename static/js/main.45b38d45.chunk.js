(this["webpackJsonpapp.js"]=this["webpackJsonpapp.js"]||[]).push([[0],{14:function(e,t,n){e.exports={wrapper:"Comments_wrapper__3hjhU",comment__wrapper:"Comments_comment__wrapper__75B9A",comment__parent:"Comments_comment__parent__3XXIU",comment__initial:"Comments_comment__initial__3d-wZ",comment__low:"Comments_comment__low__PjDJc",comment__clicked:"Comments_comment__clicked__WGkI7",comment__disabled:"Comments_comment__disabled__2FFip",author:"Comments_author__2u9RH",top:"Comments_top__XxDRG",title:"Comments_title__1nmJe"}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(59).default.create({baseURL:"https://hacker-news.firebaseio.com/v0/"}),a={getItem:function(e){return r.get("/item/".concat(e,".json?print=pretty"))},getUsers:function(e){return r.get("user/".concat(e,".json?print=pretty"))},getIdsOfNewStories:function(){return r.get("newstories.json?print=pretty")}}},19:function(e,t,n){"use strict";n.r(t),n.d(t,"setItem",(function(){return _})),n.d(t,"setChunkOfItems",(function(){return h})),n.d(t,"addKids",(function(){return O})),n.d(t,"togglePreloaderBottom",(function(){return g})),n.d(t,"togglePreloader",(function(){return x})),n.d(t,"toggleDisable",(function(){return w})),n.d(t,"reload",(function(){return v})),n.d(t,"requestItems",(function(){return E})),n.d(t,"requestKids",(function(){return C})),n.d(t,"setEmptyChildrens",(function(){return S})),n.d(t,"reloadPage",(function(){return R}));var r=n(3),a=n.n(r),s=n(6),i=n(24),c=n(2),o=n(16),u="NEWS-REDUCER/SET_ITEM",d="NEWS-REDUCER/SET_CHUNK",l="NEWS_REDUCER/TOGGLE_PRELOADER",m="NEWS_REDUCER/TOGGLE_PRELOADER_BOTTOM",f="NEWS_REDUCER/TOGGLE_DISABLE",b="NEWS_REDUCER/ADD_KID",p="NEWS_REDUCER/RELOAD",j={items:[],isPreloaded:!0,isPreloadedBottom:!1,isDisabled:!0},_=function(e){return{type:u,item:e}},h=function(e){return{type:d,chunk:e}},O=function(e,t){return{type:b,chunk:e,id:t}},g=function(e){return{type:m,isPreloadedBottom:e}},x=function(e){return{type:l,isPreloaded:e}},w=function(e){return{type:f,isDisabled:e}},v=function(e){return{type:p,items:e}},N=[],E=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(x(!0)),n(g(!0)),n(w(!0)),t.next=5,n(k(e));case 5:n(w(!1)),n(g(!1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data||!t.data.kids){e.next=8;break}s=0;case 2:if(!(s<t.data.kids.length)){e.next=8;break}return e.next=5,n(r(t.data.kids[s]));case 5:s++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function e(t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.getItem(t);case 2:return s=n.sent,r(_(s.data)),"story"===s.data.type&&r(x(!1)),n.next=7,P(s,r,e);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},D=function e(t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.getItem(t);case 2:return s=n.sent,N.push(s.data),n.next=6,P(s,r,e);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(e,t,n){for(var r=function(r){n.forEach((function(n){return n.id===e.data.kids[r]&&t.push(n)}))},a=0;a<e.data.kids.length;a++)r(a)},C=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=[],n.next=3,o.a.getItem(e);case 3:(i=n.sent).data&&i.data.kids&&(y(i,s,t),r(O(s,e)));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=function(e){return function(t){t(O([],e))}},I=function(e,t,n){return function(){var r=Object(s.a)(a.a.mark((function r(s){var i,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[],r.next=3,o.a.getItem(e);case 3:if(!(c=r.sent).data||!c.data.kids){r.next=11;break}if(y(c,i,t),r.t0=e===n[0],!r.t0){r.next=10;break}return r.next=10,s(D(e));case 10:N.forEach((function(t){t.id===+e&&(t.childrens=i)}));case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},R=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(w(!0)),t[0].childrens){n.next=4;break}return setTimeout((function(){return r(w(!1))}),500),n.abrupt("return",null);case 4:s=[e],t.forEach((function(e){return e.childrens&&e.childrens.length>0&&"story"!==e.type&&s.push(e.id)})),i=0;case 7:if(!(i<s.length)){n.next=13;break}return n.next=10,r(I(s[i],t,s));case 10:i++,n.next=7;break;case 13:r(v(N)),N=[],r(w(!1));case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(c.a)(Object(c.a)({},e),{},{items:0!==e.items.length&&"story"===t.item.type?[t.item]:[].concat(Object(i.a)(e.items),[t.item])});case d:return Object(c.a)(Object(c.a)({},e),{},{items:t.chunk});case b:return Object(c.a)(Object(c.a)({},e),{},{items:e.items.map((function(e){return e.id===+t.id?Object(c.a)(Object(c.a)({},e),{},{childrens:t.chunk}):Object(c.a)({},e)}))});case p:return Object(c.a)(Object(c.a)({},e),{},{items:t.items});case l:return Object(c.a)(Object(c.a)({},e),{},{isPreloaded:t.isPreloaded});case m:return Object(c.a)(Object(c.a)({},e),{},{isPreloadedBottom:t.isPreloadedBottom});case f:return Object(c.a)(Object(c.a)({},e),{},{isDisabled:t.isDisabled});default:return e}}},22:function(e,t,n){"use strict";n.r(t),n.d(t,"setIds",(function(){return p})),n.d(t,"setStories",(function(){return j})),n.d(t,"togglePreloader",(function(){return _})),n.d(t,"togglePreloaderBottom",(function(){return h})),n.d(t,"toggleDisable",(function(){return O})),n.d(t,"requestIds",(function(){return g})),n.d(t,"requestStories",(function(){return w})),n.d(t,"reloadStories",(function(){return v}));var r=n(3),a=n.n(r),s=n(6),i=n(24),c=n(2),o=n(16),u="MAIN-REDUCER/SET_IDS",d="MAIN-REDUCER/SET_STORIES",l="MAIN-REDUCER/TOGGLE_PRELOADER",m="MAIN-REDUCER/TOGGLE_PRELOADER_BOTTOM",f="MAIN_REDUCER?TOGGLE_DISABLE",b={idsOfNewStories:[],stories:[],isPreloaded:!0,isPreloadedBottom:!0,isDisabled:!0},p=function(e){return{type:u,ids:e}},j=function(e){return{type:d,stories:e}},_=function(e){return{type:l,isPreloaded:e}},h=function(e){return{type:m,isPreloadedBottom:e}},O=function(e){return{type:f,isDisabled:e}},g=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getIdsOfNewStories();case 2:n=e.sent,t(p(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,s){var i,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O(!0)),i=0,c=[],e.next=5,n(g());case 5:if(!(i<100)){e.next=14;break}return e.next=8,r.getItem(t[i]);case 8:o=e.sent,c.push(o.data),c.length%s===0&&(n(j(c)),10===s&&n(_(!1)),c=[]),i++,e.next=5;break;case 14:n(O(!1)),n(h(!1));case 16:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),w=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(_(!0)),n(h(!0)),x(e,n,o.a,10);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x(e,n,o.a,100);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(c.a)(Object(c.a)({},e),{},{idsOfNewStories:t.ids});case d:return Object(c.a)(Object(c.a)({},e),{},{stories:e.stories.length<100?[].concat(Object(i.a)(e.stories),Object(i.a)(t.stories)):t.stories});case l:return Object(c.a)(Object(c.a)({},e),{},{isPreloaded:t.isPreloaded});case m:return Object(c.a)(Object(c.a)({},e),{},{isPreloadedBottom:t.isPreloadedBottom});case f:return Object(c.a)(Object(c.a)({},e),{},{isDisabled:t.isDisabled});default:return e}}},51:function(e,t,n){},52:function(e,t,n){},7:function(e,t,n){e.exports={top:"News_top__1sbA7",button:"News_button__1haJm",disabled_button:"News_disabled_button__37m_m",text__wrapper:"News_text__wrapper__3XLnS",count:"News_count__2U7_A",author:"News_author__36A-G",data:"News_data__3r4H4",title:"News_title__3zIRZ",delleted:"News_delleted__2mk4s"}},77:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),s=n.n(a),i=n(25),c=n.n(i),o=(n(51),n(52),n(5)),u=n(9),d=n.n(u),l=n(15),m=function(e){var t=new Date(1e3*e);return t.getDate()+"/"+t.getMonth()+"/"+t.getFullYear()+"  "+(1===t.getHours().toString().length?"0"+t.getHours():t.getHours())+":"+(1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes())},f=function(e){var t=+new Date-1e3*e,n=new Date(t),r=n.getFullYear()-1970,a=n.getMonth(),s=n.getDate()-1,i=n.getHours()-3,c=n.getMinutes(),o=n.getSeconds();return r&&"".concat(r,1===r?" year ago":" years ago")||a&&"".concat(a,1===a?" month ago":" months ago")||s&&"".concat(s,1===s?" day ago":" days ago")||i&&"".concat(i,1===i?" hour ago":" hours ago")||c&&"".concat(c,1===c?" minute ago":" minutes ago")||o&&"".concat(o,1===o?" second ago":" seconds ago")},b=n.p+"static/media/preloader-bottom.7f686c03.gif",p=function(e){var t=e.stories,n=e.reloadStories,a=e.idsOfNewStories,s=e.isDisabled,i=e.isPreloadedBottom;return t.length<1?null:Object(r.jsxs)("div",{className:d.a.main,children:[Object(r.jsx)("button",{className:d.a.button+" "+(s&&d.a.disabled_button),disabled:s,onClick:function(){return n(a)},children:s?"The page is updating...":"Update"}),Object(r.jsx)("div",{className:d.a.items,children:t.map((function(e){return e&&!e.deleted?Object(r.jsxs)(l.b,{className:d.a.item,to:"/News/".concat(e.id),children:[Object(r.jsxs)("div",{className:d.a.text,children:[Object(r.jsx)("div",{className:d.a.title,children:e.title}),Object(r.jsxs)("div",{className:d.a.bottom,children:[Object(r.jsx)("div",{className:d.a.time,children:m(e.time)}),Object(r.jsxs)("div",{className:d.a.author,children:["author: ",Object(r.jsx)("span",{children:e.by})]})]})]}),Object(r.jsxs)("div",{className:d.a.score,children:[Object(r.jsx)("span",{className:d.a.score__num,children:e.score}),Object(r.jsx)("span",{className:d.a.score__text,children:"score"})]})]},e.id):null}))}),i&&Object(r.jsx)("img",{className:"preloader__bottom",src:b,alt:""})]})},j=n(18),_=n(22),h=function(e){return e.mainPage.idsOfNewStories},O=function(e){return e.mainPage.stories},g=function(e){return e.mainPage.isPreloaded},x=function(e){return e.mainPage.isPreloadedBottom},w=function(e){return e.mainPage.isDisabled},v=n.p+"static/media/main-preloader.f14be704.gif",N=Object(j.b)((function(e){return{idsOfNewStories:h(e),stories:O(e),isPreloaded:g(e),isDisabled:w(e),isPreloadedBottom:x(e)}}),{requestIds:_.requestIds,requestStories:_.requestStories,reloadStories:_.reloadStories})((function(e){var t=e.requestIds,n=e.requestStories,s=e.reloadStories,i=e.idsOfNewStories,c=e.stories,o=e.isPreloaded,u=e.isDisabled,d=e.isPreloadedBottom;return Object(a.useEffect)((function(){0===i.length&&t(),i.length>100&&0===c.length&&n(i),c.length>0&&s(i)}),[t,n,s,i.length]),Object(a.useEffect)((function(){var e=setTimeout((function(){if(u)return null;i.length>100&&s(i)}),6e4);return function(){return clearTimeout(e)}}),[s,i.length,JSON.stringify(i),u]),o?Object(r.jsx)("img",{className:"preloader",src:v,alt:""}):Object(r.jsx)(p,{stories:c,reloadStories:s,idsOfNewStories:i,isDisabled:u,isPreloadedBottom:d})})),E=n(3),P=n.n(E),k=n(2),D=n(6),y=n(44),C=n(45),S=n(7),I=n.n(S),R=n(14),B=n.n(R),M=n.p+"static/media/preloader-bottom-news.e8f649af.gif",T=function e(t){var n=t.comments,a=t.addChildrens,s=t.items,i=t.isClicked,c=t.isDisabled;return n.slice().sort((function(e,t){return t.time-e.time})).map((function(t){return Object(r.jsxs)("div",{className:B.a.comment__wrapper,children:[Object(r.jsxs)("div",{className:B.a.top,children:[Object(r.jsx)("span",{className:B.a.author,children:t.by}),Object(r.jsx)("span",{className:B.a.time,children:f(t.time)})]}),Object(r.jsx)("div",{className:(t.kids&&B.a.comment__parent)+" "+(t.parent===s[0].id?B.a.comment__initial:B.a.comment__low)+" "+(i[t.id]&&t.kids&&B.a.comment__clicked)+" "+(t.kids&&c&&B.a.comment__disabled),disabled:!0,onClick:function(){a(t.id,s,c)},dangerouslySetInnerHTML:{__html:t.text?t.text:"Comment deleted"}},t.id),s.map((function(n){if(n.id===t.id&&n.childrens)return Object(r.jsx)(e,{addChildrens:a,items:s,comments:n.childrens,isClicked:i,isDisabled:c},n.id)}))]},t.id)}))},A=function(e){var t=e.items,n=e.isPreloaded,a=e.isClicked,s=e.addChildrens,i=e.isPreloadedBottom,c=e.isDisabled;return!n&&t[0]&&t[0].kids&&t[0].childrens?Object(r.jsxs)("div",{className:B.a.wrapper,children:[Object(r.jsx)("div",{className:B.a.title,children:Object(r.jsx)("h2",{children:"Comments"})}),Object(r.jsx)(T,{addChildrens:s,items:t,comments:t[0].childrens,isClicked:a,isDisabled:c}),i&&Object(r.jsx)("img",{className:"preloader__bottom-news",src:M,alt:""})]}):null},U=function(e){var t=e.items,n=e.reloadPage,a=e.isPreloaded,s=e.isDisabled,i=e.idOfStory,c=e.isClicked,o=e.addChildrens,u=e.isPreloadedBottom;return t.length<1?null:t[0]&&t[0].title&&t[0].time&&t[0].by?Object(r.jsxs)("div",{className:I.a.news,children:[Object(r.jsx)("div",{className:I.a.top,children:Object(r.jsxs)("div",{className:I.a.text__wrapper,children:[Object(r.jsx)("button",{disabled:s,className:I.a.button+" "+(s&&I.a.disabled_button),onClick:Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(i,t);case 2:case"end":return e.stop()}}),e)}))),children:s?"The page is updating...":"Update"}),Object(r.jsx)("span",{className:I.a.link,children:Object(r.jsx)(l.b,{to:"/HackerNewsAPI-Avito",children:"News list"})}),t[0].url&&Object(r.jsx)("span",{className:I.a.link,children:t[0]&&Object(r.jsx)("a",{href:t[0].url,children:"Link to the news"})}),Object(r.jsxs)("span",{children:["Title: ",Object(r.jsx)("span",{className:I.a.title,children:t[0].title})," "]}),Object(r.jsxs)("span",{children:["Publication date: ",Object(r.jsx)("span",{className:I.a.data,children:m(t[0].time)})]}),Object(r.jsxs)("span",{children:["Author: ",Object(r.jsx)("span",{className:I.a.author,children:t[0].by})]}),Object(r.jsx)("span",{children:s?"Count of comments is computing...":Object(r.jsxs)("span",{children:["Count of comments: ",Object(r.jsx)("span",{className:I.a.count,children:t.length-1})]})})]})}),Object(r.jsx)(A,{items:t,isPreloaded:a,addChildrens:o,isClicked:c,isPreloadedBottom:u,isDisabled:s})]}):Object(r.jsxs)("div",{className:I.a.text__wrapper,children:[Object(r.jsx)("span",{className:I.a.link,children:Object(r.jsx)(l.b,{to:"/HackerNewsAPI-Avito",children:"News list"})}),Object(r.jsx)("span",{className:I.a.delleted,children:"NEWS DELETED"})]})},L=n(19),q=function(e){return e.newsPage.items},G=function(e){return e.newsPage.isPreloaded},H=function(e){return e.newsPage.isPreloadedBottom},W=function(e){return e.newsPage.isDisabled},F=n(20),K=Object(F.compose)(Object(j.b)((function(e){return{items:q(e),isPreloaded:G(e),isPreloadedBottom:H(e),isDisabled:W(e)}}),{reloadPage:L.reloadPage,requestItems:L.requestItems,setEmptyChildrens:L.setEmptyChildrens,requestKids:L.requestKids}),o.e)((function(e){var t=e.reloadPage,n=e.requestItems,s=e.setEmptyChildrens,i=e.items,c=e.isPreloaded,o=e.isDisabled,u=e.requestKids,d=e.isPreloadedBottom,l=Object(C.a)(e,["reloadPage","requestItems","setEmptyChildrens","items","isPreloaded","isDisabled","requestKids","isPreloadedBottom"]),m=Object(a.useState)({}),f=Object(y.a)(m,2),b=f[0],p=f[1],j=function(){var e=Object(D.a)(P.a.mark((function e(t,n,r){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",null);case 2:if(a={},!b[t]){e.next=9;break}s(t),a[t]=!1,p(Object(k.a)(Object(k.a)({},b),a)),e.next=13;break;case 9:return e.next=11,u(t,n);case 11:a[t]=!0,p(Object(k.a)(Object(k.a)({},b),a));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n(l.match.params.id)}),[l.match.params.id,n]),Object(a.useEffect)((function(){var e=setTimeout((function(){if(o)return null;t(l.match.params.id,i)}),6e4);return function(){return clearTimeout(e)}}),[i.length,o,JSON.stringify(i),l.match.params.id,t]),Object(a.useEffect)((function(){0!==i.length&&u(l.match.params.id,i)}),[i.length,l.match.params.id,u]),c?Object(r.jsx)("img",{className:"preloader",src:v,alt:""}):Object(r.jsx)(U,{items:i,isPreloaded:c,reloadPage:t,idOfStory:l.match.params.id,isDisabled:o,addChildrens:j,isClicked:b,isPreloadedBottom:d})}));var J=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(o.a,{path:"/HackerNewsAPI-Avito",render:function(){return Object(r.jsx)(N,{})}}),Object(r.jsx)(o.a,{path:"/News/:id?",render:function(){return Object(r.jsx)(K,{})}})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))},Z=n(43),z=n(20),Q=z.combineReducers,Y=z.createStore,V=z.applyMiddleware,$=Y(Q({mainPage:n(22).default,newsPage:n(19).default}),V(Z.a));window.store=$;var ee=$;c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(l.a,{children:Object(r.jsx)(j.a,{store:ee,children:Object(r.jsx)(J,{})})})}),document.getElementById("root")),X()},9:function(e,t,n){e.exports={item:"Main_item__3Ea2a",bottom:"Main_bottom__3Zl6k",text:"Main_text__2ghqa",title:"Main_title__1S8vA",author:"Main_author__1rnnt",time:"Main_time__13HdR",score:"Main_score__22PUV",score__num:"Main_score__num__2wU0Q",score__text:"Main_score__text__I9EEz",button:"Main_button__2eW8g",disabled_button:"Main_disabled_button__2IQF3"}}},[[77,1,2]]]);
//# sourceMappingURL=main.45b38d45.chunk.js.map